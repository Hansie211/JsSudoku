"use strict";(globalThis["webpackChunkjs_sudoku"]=globalThis["webpackChunkjs_sudoku"]||[]).push([[810],{77810:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ze});var i=l(59835),s=l(86970),c=l(61957);const a={class:"q-pt-lg"},n={id:"bottom-bar",class:"flex column full-width"},d={id:"info-bar",class:"flex row full-width q-px-sm"},o={class:"text-caption q-mr-sm flex flex-center"},u={class:"text-caption flex-center"},r={id:"action-bar",class:"full-width"},m={id:"mode-bar",class:"row q-pa-sm"};function p(e,t,l,p,h,v){const b=(0,i.up)("sudoku-board"),g=(0,i.up)("q-space"),f=(0,i.up)("difficulty-rating"),C=(0,i.up)("q-btn"),S=(0,i.up)("q-toggle"),y=(0,i.up)("number-bar"),z=(0,i.up)("q-page");return e.gameState.puzzle?((0,i.wg)(),(0,i.j4)(z,{key:0,id:"page"},{default:(0,i.w5)((()=>[(0,i._)("div",a,[(0,i.Wm)(b,{ref:"sudoku",puzzle:e.gameState.puzzle,selectedValue:e.encircledValue,size:"4.7vw",onClick:e.cellClick,onCellUpdated:e.cellUpdated},null,8,["puzzle","selectedValue","onClick","onCellUpdated"])]),(0,i._)("div",n,[(0,i._)("div",d,[(0,i.wy)((0,i._)("div",null,(0,s.zw)(e.puzzleTime),513),[[c.F8,e.settings.showTime]]),(0,i.Wm)(g),(0,i._)("div",o,[(0,i.Wm)(f,{level:e.gameDifficulty.level},null,8,["level"])]),(0,i._)("div",u,"Hints "+(0,s.zw)(e.gameState.hintCount),1)]),(0,i._)("div",r,[(0,i._)("div",m,[(0,i.Wm)(g),(0,i.Wm)(C,{icon:"undo",flat:"",round:"",size:"md",onClick:e.undo},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(C,{icon:"tips_and_updates",flat:"",round:"",size:"md",onClick:e.hint},null,8,["onClick"]),[[c.F8,e.settings.showHints]]),(0,i.Wm)(S,{modelValue:e.noteMode,"onUpdate:modelValue":t[0]||(t[0]=t=>e.noteMode=t),icon:"edit",color:"positive"},null,8,["modelValue"]),(0,i.Wm)(C,{icon:"backspace",flat:"",round:"",size:"md",onClick:e.clearCell},null,8,["onClick"])]),(0,i.Wm)(y,{size:9,onClick:e.onTapNumber,activeNumbers:e.activeNumbers,inactiveNumbers:e.selectCellMode?e.inactiveNumbers:[],completedNumbers:e.completedNumbers,selectedNumber:e.selectNumberMode?e.selectedValue:0},null,8,["onClick","activeNumbers","inactiveNumbers","completedNumbers","selectedNumber"])])])])),_:1})):(0,i.kq)("",!0)}const h={id:"board"};function v(e,t,l,s,c,a){const n=(0,i.up)("sudoku-cell");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.boardSize,((t,l)=>((0,i.wg)(),(0,i.iD)("div",{key:l,class:"square"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.getSquareCells(l),(t=>((0,i.wg)(),(0,i.j4)(n,{key:t.id,puzzle:e.puzzle,cell:t,isRowSelected:e.selectedCell?.row.index===t.row.index,isColumnSelected:e.selectedCell?.column.index===t.column.index,isSquareSelected:e.selectedCell?.square.index===t.square.index,isSelected:e.selectedCellId===t.id,isValueSelected:t.hasValue()&&e.selectedValue===t.value,onClick:()=>e.onCellClick(t.id),onUpdate:(l,i)=>e.$emit("cellUpdated",t.id,l,i),size:e.size},null,8,["puzzle","cell","isRowSelected","isColumnSelected","isSquareSelected","isSelected","isValueSelected","onClick","onUpdate","size"])))),128))])))),128))])])}var b=l(11857),g=l(2655);const f=e=>((0,i.dD)("data-v-16a25cf2"),e=e(),(0,i.Cn)(),e),C=f((()=>(0,i._)("div",{id:"circle"},null,-1))),S={key:1},y={key:1,id:"notes"};function z(e,t,l,c,a,n){return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["cell",e.classObject])},[(0,i._)("div",{id:"tap-selector",onClick:t[0]||(t[0]=()=>e.$emit("click"))}),e.cell.hasValue()?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[C,e.cell.isStatic?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)((0,s.zw)(e.cell.value),1)],64)):((0,i.wg)(),(0,i.iD)("span",S,(0,s.zw)(e.cell.value),1))],64)):((0,i.wg)(),(0,i.iD)("div",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.notes,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"note"},(0,s.zw)(e?t+1:""),1)))),128))]))],2)}var w=l(10098);const k=(0,i.aZ)({name:"SudokuCell",emits:["click","update"],props:{puzzle:{type:g.ZP,required:!0},cell:{type:g.bL,required:!0},isSelected:{type:Boolean,default:!1},isSquareSelected:{type:Boolean,default:!1},isRowSelected:{type:Boolean,default:!1},isColumnSelected:{type:Boolean,default:!1},isValueSelected:{type:Boolean,default:!1},size:{type:String,default:"1.0em"}},setup(){const e=(0,w.F)();return{settings:e}},computed:{classObject(){return{static:this.cell.isStatic,selected:this.isSelected,"row-selected":this.isRowSelected,"column-selected":this.isColumnSelected,"square-selected":this.isSquareSelected,"value-selected":this.isValueSelected,error:this.settings.showErrors&&this.isError}},boardSize(){return b.Ju.SIZE},isError(){return this.cell.hasValue()&&this.cell.value!==this.puzzle.getSolutionValue({position:this.cell.position})},notes(){return Array(this.boardSize).fill(null).map(((e,t)=>this.cell.notes.hasValue(t+1)))}},watch:{"cell.value":{handler(e,t){this.$emit("update",e,t)},immediate:!0}}}),_=()=>{(0,c.sj)((e=>({"519ba6b2":e.size})))},N=k.setup;k.setup=N?(e,t)=>(_(),N(e,t)):_;const x=k;var q=l(11639);const Z=(0,q.Z)(x,[["render",z],["__scopeId","data-v-16a25cf2"]]),V=Z,I=(0,i.aZ)({components:{SudokuCell:V},name:"SodukuBoard",props:{puzzle:{type:g.ZP,required:!0},selectedValue:{type:Number,default:0},size:{type:String,default:"1.0em"}},emits:["click","cellUpdated"],data(){return{selectedCellId:null}},methods:{onCellClick(e){this.selectedCellId=e,this.$emit("click",e)},getSquareCells(e){return Array(b.Ju.SIZE).fill(null).map(((t,l)=>{const[i,s]=b.Ju.squares[e].get(l);return this.puzzle.getCell({x:i,y:s})}))}},computed:{boardSize(){return b.Ju.SIZE},selectedCellIndex(){return this.puzzle.cells.findIndex((e=>e.id===this.selectedCellId))},selectedCell(){return this.selectedCellIndex>-1?this.puzzle.cells[this.selectedCellIndex]:null}}}),D=(0,q.Z)(I,[["render",v],["__scopeId","data-v-fba18ae4"]]),M=D;var W=l(67843);const j={id:"number-bar"},B={style:{display:"flex","flex-direction":"column",height:"100%","justify-content":"flex-start",width:"100%","padding-bottom":"10px","padding-top":"10px",color:"black"}},U={style:{position:"relative",display:"flex","justify-content":"center","align-items":"center","margin-top":"-8px","margin-bottom":"4px"}},H={style:{height:"100%",display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}},$={key:0,class:"number-btn"};function E(e,t,l,c,a,n){const d=(0,i.up)("q-icon"),o=(0,i.up)("q-btn");return(0,i.wg)(),(0,i.iD)("div",j,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Math.ceil(e.size/2),(t=>((0,i.wg)(),(0,i.iD)("div",{key:t},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columnNumbers(t),(t=>((0,i.wg)(),(0,i.j4)(o,{key:t,size:"xl",color:"white",padding:"none",class:(0,s.C_)(["number-btn",e.classObject(t)]),onClick:()=>e.$emit("click",t)},{default:(0,i.w5)((()=>[(0,i._)("div",B,[(0,i._)("div",U,(0,s.zw)(t),1),(0,i._)("div",H,[(0,i.Wm)(d,{name:"adjust",class:"number-icon active-icon q-pa-none q-ma-none",padding:"none",size:"sm"}),(0,i.Wm)(d,{name:"done_all",class:"number-icon completed-icon q-pa-none q-ma-none",padding:"none",size:"sm"})])])])),_:2},1032,["class","onClick"])))),128)),1===e.columnNumbers(t).length?((0,i.wg)(),(0,i.iD)("div",$)):(0,i.kq)("",!0)])))),128))])}l(46727);const Q=(0,i.aZ)({name:"NumberBar",props:{size:{type:Number,required:!0},activeNumbers:{type:Array,default:()=>[]},inactiveNumbers:{type:Array,default:()=>[]},completedNumbers:{type:Array,default:()=>[]},selectedNumber:{type:Number,default:0}},emits:["click"],methods:{classObject(e){return{"active-number":this.activeNumbers.includes(e),"inactive-number":this.inactiveNumbers.includes(e),"completed-number":this.completedNumbers.includes(e),"selected-number":this.selectedNumber===e,"unselected-number":this.selectedNumber>0&&this.selectedNumber!==e}},columnNumbers(e){const t=e,l=e+Math.ceil(this.size/2);return l>this.size?[t]:[t,l]}}});var T=l(24455),L=l(22857),P=l(69984),A=l.n(P);const J=(0,q.Z)(Q,[["render",E],["__scopeId","data-v-126bbdda"]]),O=J;A()(Q,"components",{QBtn:T.Z,QIcon:L.Z});const Y={class:"score-item"},R={class:"caption text-subtitle2 flex row items-center"},K={class:"value"},F={class:"score-item"},G={class:"caption text-subtitle2 flex row items-center"},X={class:"value text-body1"},ee={class:"score-item"},te={class:"caption text-subtitle2 flex row items-center"},le={class:"value text-body1"},ie={class:"score-item"},se={class:"caption text-subtitle2 flex row items-center"},ce={class:"value text-body1"};function ae(e,t,l,c,a,n){const d=(0,i.up)("q-card-section"),o=(0,i.up)("q-icon"),u=(0,i.up)("difficulty-rating"),r=(0,i.up)("q-btn"),m=(0,i.up)("q-card"),p=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.j4)(p,{ref:"dialog",onHide:e.onDialogHide,persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"q-dialog-plugin q-pa-sm"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"text-h4"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Game completed! ")])),_:1}),(0,i.Wm)(d,{id:"scoreboard",class:"text-body1 q-my-lg"},{default:(0,i.w5)((()=>[(0,i._)("div",Y,[(0,i._)("div",R,[(0,i.Uk)("Difficulty "),(0,i.Wm)(o,{class:"icon",name:"o_psychology"})]),(0,i._)("div",K,[(0,i.Wm)(u,{level:e.victory.difficultyLevel},null,8,["level"])])]),(0,i._)("div",F,[(0,i._)("div",G,[(0,i.Uk)("Hints "),(0,i.Wm)(o,{class:"icon",name:"o_tips_and_updates"})]),(0,i._)("div",X,(0,s.zw)(e.victory.hintCount),1)]),(0,i._)("div",ee,[(0,i._)("div",te,[(0,i.Uk)("Time "),(0,i.Wm)(o,{class:"icon",name:"o_timer"})]),(0,i._)("div",le,(0,s.zw)(e.displayTime),1)]),(0,i._)("div",ie,[(0,i._)("div",se,[(0,i.Uk)("Level "),(0,i.Wm)(o,{class:"icon",name:"o_tour"})]),(0,i._)("div",ce,"#"+(0,s.zw)(e.victory.level),1)])])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r,{label:"Play Another",class:"full-width",size:"lg",color:"primary",onClick:e.nextLevel},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}var ne=l(43212),de=l(28878),oe=l(57896);const ue=(0,i.aZ)({name:"VictoryScreen",components:{DifficultyRating:de.Z},props:{victory:{type:oe.f,required:!0}},emits:["ok","hide"],methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},nextLevel(){this.$q.dialog({component:ne.Z}).onOk((e=>{this.$emit("ok",e),this.hide()}))}},computed:{displayTime(){const e=this.victory.time%60,t=Math.floor(this.victory.time/60);return t.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")}}});var re=l(35263),me=l(44458),pe=l(63190);const he=(0,q.Z)(ue,[["render",ae],["__scopeId","data-v-ec8dc3d4"]]),ve=he;A()(ue,"components",{QDialog:re.Z,QCard:me.Z,QCardSection:pe.Z,QIcon:L.Z,QBtn:T.Z});l(76948);var be=l(31194);const ge=(0,i.aZ)({components:{SudokuBoard:M,NumberBar:O,DifficultyRating:de.Z},name:"IndexPage",setup(){const e=(0,w.F)(),t=(0,oe.N)();return{settings:e,victoryStore:t,gameState:(0,W.k)()}},created(){this.gameState.eventBus.on("victory",(e=>{this.showVictory()})),this.gameState.eventBus.on("error",(e=>{this.showError(e.message)}))},data(){return{noteMode:!1,selectedCellId:null,numCount:Array(b.Ju.SIZE).fill(0),selectedValue:0}},methods:{showError(e){this.$q.notify({message:e,group:!1,type:"negative",timeout:1e3,actions:[{icon:"close",color:"white"}]})},showVictory(){const e=this.gameState.timer.time,t=new oe.f({level:this.gameState.puzzle.seed,time:e,hintCount:this.gameState.hintCount,difficultyLevel:this.gameState.puzzle.difficultyLevel});this.$q.dialog({component:ve,componentProps:{victory:t}}).onOk((async e=>{const l=e.seed,i=e.difficultyLevel;this.victoryStore.addVictory(t),await this.gameState.newLevel(i,l)}))},onTapNumber(e){this.selectCellMode&&this.placeNumber(e),this.selectNumberMode&&(this.selectedValue=this.selectedValue!==e?e:0)},placeNumber(e){this.noteMode?this.gameState.placeNote(this.selectedCellId,e):this.gameState.placeNum(this.selectedCellId,e)},clearCell(){this.gameState.clearCell(this.selectedCellId)},hint(){this.gameState.hint()},cellClick(e){this.selectedCellId=e,this.selectNumberMode&&this.selectedValue&&!this.selectedCell.isStatic&&this.placeNumber(this.selectedValue)},cellUpdated(e,t,l){t&&this.numCount[t-1]++,l&&this.numCount[l-1]--},undo(){this.gameState.undo()},initializeSelectCellMode(){this.selectedValue=this.selectedCell?.value??0},initializeSelectNumberMode(){this.selectedValue=1}},computed:{boardSize(){return b.Ju.SIZE},selectedCell(){return this.gameState.puzzle.findCellById(this.selectedCellId)},activeNumbers(){return this.selectedCell?this.selectedCell.isStatic||this.selectedCell.value?[]:this.selectedCell.notes.values:[]},inactiveNumbers(){return this.settings.markImpossibleNumbers&&this.selectedCell?this.selectedCell.isStatic?Array(this.boardSize).fill(null).map(((e,t)=>t+1)):g.ZP.getSurroundingValues(this.gameState.puzzle,this.selectedCell):[]},puzzleTime(){const e=this.gameState.timer.time,t=0+e%60,l=0+Math.floor(e/60);return l.toString().padStart(2,"0")+":"+t.toString().padStart(2,"0")},completedNumbers(){return this.numCount.map(((e,t)=>e>=b.Ju.SIZE?t+1:null)).filter((e=>null!==e))},gameDifficulty(){return be.ZP[this.gameState.puzzle?.difficultyLevel??0]??be.ZP[0]},selectCellMode(){return!this.settings.placeNumbersOnSelect},selectNumberMode(){return!this.selectCellMode},encircledValue(){return this.selectCellMode||this.selectedValue?this.selectedValue:this.selectedCell?.value??0}},watch:{"selectedCell.value"(){this.selectCellMode&&(this.selectedValue=this.selectedCell.value)},selectCellMode:{handler(e){!0===e&&this.initializeSelectCellMode()},immediate:!0},selectNumberMode:{handler(e){!0===e&&this.initializeSelectNumberMode()},immediate:!0}}});var fe=l(69885),Ce=l(90136),Se=l(23175);const ye=(0,q.Z)(ge,[["render",p],["__scopeId","data-v-07243baa"]]),ze=ye;A()(ge,"components",{QPage:fe.Z,QSpace:Ce.Z,QBtn:T.Z,QToggle:Se.Z})}}]);