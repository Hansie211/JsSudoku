"use strict";(globalThis["webpackChunkjs_sudoku"]=globalThis["webpackChunkjs_sudoku"]||[]).push([[271],{99271:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Ce});var i=l(59835),s=l(86970),n=l(61957);const a={class:"q-pt-lg"},c={id:"bottom-bar",class:"flex column full-width"},d={id:"info-bar",class:"flex row full-width q-px-sm"},o={class:"text-caption q-mr-sm flex flex-center"},u={class:"text-caption flex-center"},r={id:"action-bar",class:"full-width"},m={id:"mode-bar",class:"row q-pa-sm"};function h(e,t,l,h,p,g){const v=(0,i.up)("sudoku-board"),b=(0,i.up)("q-space"),C=(0,i.up)("difficulty-rating"),f=(0,i.up)("q-btn"),S=(0,i.up)("q-toggle"),y=(0,i.up)("number-bar"),z=(0,i.up)("q-page");return e.gameState.puzzle?((0,i.wg)(),(0,i.j4)(z,{key:0,id:"page"},{default:(0,i.w5)((()=>[(0,i._)("div",a,[(0,i.Wm)(v,{ref:"sudoku",puzzle:e.gameState.puzzle,selectedValue:e.encircledValue,size:"4.7vw",onClick:e.cellClick,onCellUpdated:e.cellUpdated},null,8,["puzzle","selectedValue","onClick","onCellUpdated"])]),(0,i._)("div",c,[(0,i._)("div",d,[(0,i.wy)((0,i._)("div",null,(0,s.zw)(e.puzzleTime),513),[[n.F8,e.settings.showTime]]),(0,i.Wm)(b),(0,i._)("div",o,[(0,i.Wm)(C,{level:e.gameDifficulty.level},null,8,["level"])]),(0,i._)("div",u,"Hints "+(0,s.zw)(e.gameState.hintCount),1)]),(0,i._)("div",r,[(0,i._)("div",m,[(0,i.Wm)(b),(0,i.Wm)(f,{icon:"undo",flat:"",round:"",size:"md",onClick:e.undo},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(f,{icon:"tips_and_updates",flat:"",round:"",size:"md",onClick:e.hint},null,8,["onClick"]),[[n.F8,e.settings.showHints]]),(0,i.Wm)(S,{modelValue:e.noteMode,"onUpdate:modelValue":t[0]||(t[0]=t=>e.noteMode=t),icon:"edit",color:"positive"},null,8,["modelValue"]),(0,i.Wm)(f,{icon:"backspace",flat:"",round:"",size:"md",onClick:e.clearCell},null,8,["onClick"])]),(0,i.Wm)(y,{size:9,onClick:e.onTapNumber,activeNumbers:e.activeNumbers,inactiveNumbers:e.selectCellMode?e.inactiveNumbers:[],completedNumbers:e.completedNumbers,selectedNumber:e.selectNumberMode?e.selectedValue:0},null,8,["onClick","activeNumbers","inactiveNumbers","completedNumbers","selectedNumber"])])])])),_:1})):(0,i.kq)("",!0)}const p={id:"board"};function g(e,t,l,s,n,a){const c=(0,i.up)("sudoku-cell");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.boardSize,((t,l)=>((0,i.wg)(),(0,i.iD)("div",{key:l,class:"square"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.getSquareCells(l),(t=>((0,i.wg)(),(0,i.j4)(c,{key:t.id,puzzle:e.puzzle,cell:t,isRowSelected:e.selectedCell?.row.index===t.row.index,isColumnSelected:e.selectedCell?.column.index===t.column.index,isSquareSelected:e.selectedCell?.square.index===t.square.index,isSelected:e.selectedCellId===t.id,isValueSelected:t.hasValue()&&e.selectedValue===t.value,onClick:()=>e.onCellClick(t.id),onUpdate:(l,i)=>e.$emit("cellUpdated",t.id,l,i),size:e.size},null,8,["puzzle","cell","isRowSelected","isColumnSelected","isSquareSelected","isSelected","isValueSelected","onClick","onUpdate","size"])))),128))])))),128))])])}var v=l(11857),b=l(2655);const C=e=>((0,i.dD)("data-v-11fa1c24"),e=e(),(0,i.Cn)(),e),f=C((()=>(0,i._)("div",{id:"circle"},null,-1))),S={key:1},y={key:1,id:"notes"};function z(e,t,l,n,a,c){return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["cell",e.classObject]),onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[e.cell.hasValue()?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[f,e.cell.isStatic?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)((0,s.zw)(e.cell.value),1)],64)):((0,i.wg)(),(0,i.iD)("span",S,(0,s.zw)(e.cell.value),1))],64)):((0,i.wg)(),(0,i.iD)("div",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.notes,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"note"},(0,s.zw)(e?t+1:""),1)))),128))]))],2)}var w=l(10098);const k=(0,i.aZ)({name:"SudokuCell",emits:["click","update"],props:{puzzle:{type:b.ZP,required:!0},cell:{type:b.bL,required:!0},isSelected:{type:Boolean,default:!1},isSquareSelected:{type:Boolean,default:!1},isRowSelected:{type:Boolean,default:!1},isColumnSelected:{type:Boolean,default:!1},isValueSelected:{type:Boolean,default:!1},size:{type:String,default:"1.0em"}},setup(){const e=(0,w.F)();return{settings:e}},methods:{onClick(){this.$emit("click")}},computed:{classObject(){return{static:this.cell.isStatic,selected:this.isSelected,"row-selected":this.isRowSelected,"column-selected":this.isColumnSelected,"square-selected":this.isSquareSelected,"value-selected":this.isValueSelected,error:this.settings.showErrors&&this.isError}},boardSize(){return v.Ju.SIZE},isError(){return this.cell.hasValue()&&this.cell.value!==this.puzzle.getSolutionValue({position:this.cell.position})},notes(){return Array(this.boardSize).fill(null).map(((e,t)=>this.cell.notes.hasValue(t+1)))}},watch:{"cell.value":{handler(e,t){this.$emit("update",e,t)},immediate:!0}}}),N=()=>{(0,n.sj)((e=>({"16d47e34":e.size})))},q=k.setup;k.setup=q?(e,t)=>(N(),q(e,t)):N;const _=k;var x=l(11639);const V=(0,x.Z)(_,[["render",z],["__scopeId","data-v-11fa1c24"]]),Z=V,I=(0,i.aZ)({components:{SudokuCell:Z},name:"SodukuBoard",props:{puzzle:{type:b.ZP,required:!0},selectedValue:{type:Number,default:0},size:{type:String,default:"1.0em"}},emits:["click","cellUpdated"],data(){return{selectedCellId:null}},methods:{onCellClick(e){this.selectedCellId=e,this.$emit("click",e)},getSquareCells(e){return Array(v.Ju.SIZE).fill(null).map(((t,l)=>{const[i,s]=v.Ju.squares[e].get(l);return this.puzzle.getCell({x:i,y:s})}))}},computed:{boardSize(){return v.Ju.SIZE},selectedCellIndex(){return this.puzzle.cells.findIndex((e=>e.id===this.selectedCellId))},selectedCell(){return this.selectedCellIndex>-1?this.puzzle.cells[this.selectedCellIndex]:null}}}),D=(0,x.Z)(I,[["render",g],["__scopeId","data-v-fba18ae4"]]),M=D;var W=l(67843);const j={id:"number-bar"},B={style:{display:"flex","flex-direction":"column",height:"100%","justify-content":"flex-start",width:"100%","padding-bottom":"10px","padding-top":"10px",color:"black"}},U={style:{position:"relative",display:"flex","justify-content":"center","align-items":"center","margin-top":"-8px","margin-bottom":"4px"}},H={style:{height:"100%",display:"flex","flex-direction":"row","justify-content":"center","align-items":"center"}},T={key:0,class:"number-btn"};function $(e,t,l,n,a,c){const d=(0,i.up)("q-icon"),o=(0,i.up)("q-btn");return(0,i.wg)(),(0,i.iD)("div",j,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Math.ceil(e.size/2),(t=>((0,i.wg)(),(0,i.iD)("div",{key:t},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columnNumbers(t),(t=>((0,i.wg)(),(0,i.j4)(o,{key:t,size:"xl",color:"white",padding:"none",class:(0,s.C_)(["number-btn",e.classObject(t)]),onClick:()=>e.$emit("click",t)},{default:(0,i.w5)((()=>[(0,i._)("div",B,[(0,i._)("div",U,(0,s.zw)(t),1),(0,i._)("div",H,[(0,i.Wm)(d,{name:"adjust",class:"number-icon active-icon q-pa-none q-ma-none",padding:"none",size:"sm"}),(0,i.Wm)(d,{name:"done_all",class:"number-icon completed-icon q-pa-none q-ma-none",padding:"none",size:"sm"})])])])),_:2},1032,["class","onClick"])))),128)),1===e.columnNumbers(t).length?((0,i.wg)(),(0,i.iD)("div",T)):(0,i.kq)("",!0)])))),128))])}l(46727);const E=(0,i.aZ)({name:"NumberBar",props:{size:{type:Number,required:!0},activeNumbers:{type:Array,default:()=>[]},inactiveNumbers:{type:Array,default:()=>[]},completedNumbers:{type:Array,default:()=>[]},selectedNumber:{type:Number,default:0}},emits:["click"],methods:{classObject(e){return{"active-number":this.activeNumbers.includes(e),"inactive-number":this.inactiveNumbers.includes(e),"completed-number":this.completedNumbers.includes(e),"selected-number":this.selectedNumber===e,"unselected-number":this.selectedNumber>0&&this.selectedNumber!==e}},columnNumbers(e){const t=e,l=e+Math.ceil(this.size/2);return l>this.size?[t]:[t,l]}}});var L=l(24455),Q=l(22857),P=l(69984),A=l.n(P);const Y=(0,x.Z)(E,[["render",$],["__scopeId","data-v-126bbdda"]]),J=Y;A()(E,"components",{QBtn:L.Z,QIcon:Q.Z});const O={class:"text-h6 row items-center"},R={class:"q-ml-sm"},K={class:"text-h6 row items-center"},F={class:"q-ml-sm"},G={class:"text-h6 row items-center"},X={class:"q-ml-sm"},ee={class:"text-h6 row items-center"},te={class:"q-ml-sm"};function le(e,t,l,n,a,c){const d=(0,i.up)("q-card-section"),o=(0,i.up)("difficulty-rating"),u=(0,i.up)("q-btn"),r=(0,i.up)("q-card"),m=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.j4)(m,{ref:"dialog",onHide:c.onDialogHide,persistent:""},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{class:"q-dialog-plugin q-pa-sm"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"text-h2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" You Won! ")])),_:1}),(0,i.Wm)(d,{class:"q-gutter-y-md text-h6"},{default:(0,i.w5)((()=>[(0,i._)("div",O,[(0,i.Uk)(" Difficulty: "),(0,i._)("span",R,[(0,i.Wm)(o,{level:l.victory.difficultyLevel},null,8,["level"])])]),(0,i._)("div",K,[(0,i.Uk)(" Hints: "),(0,i._)("span",F,(0,s.zw)(l.victory.hintCount),1)]),(0,i._)("div",G,[(0,i.Uk)(" Time Taken: "),(0,i._)("span",X,(0,s.zw)(c.displayTime),1)]),(0,i._)("div",ee,[(0,i.Uk)(" Level: "),(0,i._)("span",te,"#"+(0,s.zw)(l.victory.level),1)])])),_:1}),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{label:"Play Another",class:"full-width",size:"lg",color:"primary",onClick:c.nextLevel},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}var ie=l(88282),se=l(28878),ne=l(57896);const ae={name:"VictoryScreen",components:{DifficultyRating:se.Z},props:{victory:{type:ne.f,required:!0}},emits:["ok","hide"],methods:{show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},nextLevel(){this.$q.dialog({component:ie.Z}).onOk((e=>{this.$emit("ok",e),this.hide()}))}},computed:{displayTime(){const e=this.victory.time%60,t=Math.floor(this.victory.time/60);return t.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")}}};var ce=l(35263),de=l(44458),oe=l(63190);const ue=(0,x.Z)(ae,[["render",le]]),re=ue;A()(ae,"components",{QDialog:ce.Z,QCard:de.Z,QCardSection:oe.Z,QBtn:L.Z});l(76948);var me=l(31194);const he=(0,i.aZ)({components:{SudokuBoard:M,NumberBar:J,DifficultyRating:se.Z},name:"IndexPage",setup(){const e=(0,w.F)(),t=(0,ne.N)();return{settings:e,victoryStore:t,gameState:(0,W.k)()}},created(){this.gameState.eventBus.on("victory",(e=>{this.showVictory()})),this.gameState.eventBus.on("error",(e=>{this.showError(e.message)}))},data(){return{noteMode:!1,selectedCellId:null,numCount:Array(v.Ju.SIZE).fill(0),selectedValue:0}},methods:{showError(e){this.$q.notify({message:e,group:!1,type:"negative",timeout:1e3,actions:[{icon:"close",color:"white"}]})},showVictory(){const e=this.gameState.timer.time,t=new ne.f({level:this.gameState.puzzle.seed,time:e,hintCount:this.gameState.hintCount,difficultyLevel:this.gameState.puzzle.difficultyLevel});this.$q.dialog({component:re,componentProps:{victory:t}}).onOk((async e=>{const l=e.seed,i=e.difficultyLevel;this.victoryStore.addVictory(t),await this.gameState.newLevel(i,l)}))},onTapNumber(e){this.selectCellMode&&this.placeNumber(e),this.selectNumberMode&&(this.selectedValue=this.selectedValue!==e?e:0)},placeNumber(e){this.noteMode?this.gameState.placeNote(this.selectedCellId,e):this.gameState.placeNum(this.selectedCellId,e)},clearCell(){this.gameState.clearCell(this.selectedCellId)},hint(){this.gameState.hint()},cellClick(e){this.selectedCellId=e,this.selectNumberMode&&this.selectedValue&&!this.selectedCell.isStatic&&this.placeNumber(this.selectedValue)},cellUpdated(e,t,l){t&&this.numCount[t-1]++,l&&this.numCount[l-1]--},undo(){this.gameState.undo()},initializeSelectCellMode(){this.selectedValue=this.selectedCell?.value??0},initializeSelectNumberMode(){this.selectedValue=1}},computed:{boardSize(){return v.Ju.SIZE},selectedCell(){return this.gameState.puzzle.findCellById(this.selectedCellId)},activeNumbers(){return this.selectedCell?this.selectedCell.isStatic||this.selectedCell.value?[]:this.selectedCell.notes.values:[]},inactiveNumbers(){return this.settings.markImpossibleNumbers&&this.selectedCell?this.selectedCell.isStatic?Array(this.boardSize).fill(null).map(((e,t)=>t+1)):b.ZP.getSurroundingValues(this.gameState.puzzle,this.selectedCell):[]},puzzleTime(){const e=this.gameState.timer.time,t=0+e%60,l=0+Math.floor(e/60);return l.toString().padStart(2,"0")+":"+t.toString().padStart(2,"0")},completedNumbers(){return this.numCount.map(((e,t)=>e>=v.Ju.SIZE?t+1:null)).filter((e=>null!==e))},gameDifficulty(){return me.ZP[this.gameState.puzzle?.difficultyLevel??0]??me.ZP[0]},selectCellMode(){return!this.settings.placeNumbersOnSelect},selectNumberMode(){return!this.selectCellMode},encircledValue(){return this.selectCellMode||this.selectedValue?this.selectedValue:this.selectedCell?.value??0}},watch:{"selectedCell.value"(){this.selectCellMode&&(this.selectedValue=this.selectedCell.value)},selectCellMode:{handler(e){!0===e&&this.initializeSelectCellMode()},immediate:!0},selectNumberMode:{handler(e){!0===e&&this.initializeSelectNumberMode()},immediate:!0}}});var pe=l(69885),ge=l(90136),ve=l(23175);const be=(0,x.Z)(he,[["render",h],["__scopeId","data-v-07243baa"]]),Ce=be;A()(he,"components",{QPage:pe.Z,QSpace:ge.Z,QBtn:L.Z,QToggle:ve.Z})}}]);